<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />    
    <title>Plantlore Server</title>
  </head>
  <body>
	<h1>Plantlore Server</h1>

	<p>
        To allow other users to connect to your database remotely from other
        computers in the network, you must start the Plantlore Server.
        The Server mediates connection for remote clients and
        controls the number of connected clients.
        There can be 3 users connected from the same computer (using the same IP)
        and the total number of clients cannot exceed the number 32.
        This is the default settings.
	</p>

        <!--
	<h2>Obsah</h2>

	<p>
	<ol>
		<li>Vytvoření a spuštění nového serveru</li>
		<li>Připojení k existujícímu serveru za účelem administrace</li>
	</ol>
	</p>
        -->



	<h2>1. Creating and starting a new Server</h2>

	<p>
        You can modify the settings of the server on the Create a new Server tab.
	</p>

	<p>
	<img src="picture/ServerCreate.png" alt="Starting a new Server.">
	</p>


	<p>
        The Server can be started only on the local computer - because of security
        reasons.
        You can specify following parameters:
	</p>

	<p>
	<table>
		<tr>
			<th colspan="2">
				Server Settings
			</th>
		</tr>

		<tr>
			<th>
				Parameter
			</th>
			<th>
				Meaning
			</th>
		</tr>

		<tr>
			<td>
				Password
			</td>
			<td>
                                After the Server is started, it can be controlled
                                remotely.
                                To restrict the access to the Server for
                                administration purposes, you can set a password
                                that will protect the Server.
                                Anyone trying to control the Server will have to
                                pass the password to gain full control.
			</td>
		</tr>

		<tr>
			<td>
				Port
			</td>
			<td>
                                Port specifies where the Server should listen for
                                connections from remote clients.
                                
                                Port is a number from 0 to 65.535 and ports above
                                1.024 are commonly used. Lower ports are usually
                                reserved for well known services (such as FTP, HTTP, etc.).
                                
                                Ports cannot be shared - you must make sure that the
                                specified port is not in use by another application.
                                
                                The default port where Plantlore Server listens is 1099.
			</td>
		</tr>

		<tr>
			<th colspan="2">
				Database Settings
			</th>
		</tr>

		<tr>
			<th>
				Parameter
			</th>
			<th>
				Meaning
			</th>
		</tr>

		<tr>
			<td>
				DB engine
			</td>
			<td>
                                There is a wide variety of database engines that
                                allow you to work with databases, tables, users, 
                                queries and data very easily.
                                Every database engine can store several different
                                databases - databases with different structure and
                                contents. The best known database engines are
                                Oracle, MSSQL, MySQL, Postgre and Firebird.
                                Plantlore can work with some of these database
                                engines, but it is necessary to specify with
                                which it should work so that the Server can communicate
                                with it properly. Plantlore is delivered 
                                and tested with Postgre.
			</td>
		</tr>

		<tr>
			<td>
				DB Port
			</td>
			<td>
                                Database engines can be contacted on a certain port.
                            Every database engine may have a different port number.
                                In order to know where to contact the database engine,
                                you have to supply the port where the database engine listens.
                                
                                Port is a number from 0 to 65.535 and ports above
                                1.024 are commonly used. Lower ports are usually
                                reserved for well known services (such as FTP, HTTP, etc.).
                                
                                The default port of PostgreSQL database engine is 5432.
			</td>
		</tr>

		<tr>
			<td>
				Parameter
			</td>
			<td>
                                The database engine may require some additional settings.
                                For instance you have to set the encoding explicitely.
                                This parameter server for the proper additional configuration
                                of the database connection.
                                
                                Postgre does not require any additional parameter.
				<br/>
				<i>Note: the parameter is a value passed in the JDBC connections
                                string right after the exclamation mark "?"</i>
			</td>
		</tr>

	</table>
	</p>



	<h2>2. Connecting to a running Server</h2>


	<p>
        If there is a Server that is already running, you can control it remotely.
        First, you have to connect to the Server using the
        Connect to a running Server tab.
	</p>

	<p>
	<img src="picture/ServerConnect.png" alt="Connecting to a Server.">
	</p>


	<p>
        You have to supply the following parameters.
	</p>

	<p>
	<table>
		<tr>
			<th>
				Parameter
			</th>
			<th>
				Meaning
			</th>
		</tr>

		<tr>
			<td>
				Host
			</td>
			<td>
                                This parameter identifies the computer where the Server
                                is running - either by its name or IP address.
                                Every computer connected to a network must have its
                                own unique IP address so that it can be identified
                                in the network.
                                IP address is a sequence of four numbers separated with
                                dots, for instance "192.168.0.247". Some computers may have
                                also a name, such as "data.home.net".
			</td>
		</tr>

		<tr>
			<td>
				Port
			</td>
			<td>
                                The port specifies where the remote Server listens.
                                
                                Port is a number from 0 to 65.535 and ports above
                                1.024 are commonly used. Lower ports are usually
                                reserved for well known services (such as FTP, HTTP, etc.).

				The default port is 1099.
			</td>
		</tr>

		<tr>
			<td>
				Password
			</td>
			<td>
                                The password protecting the access to the Server
                                for remote control.
			</td>
		</tr>
	</table>
	</p>




	<h2>3. Administration of the Server</h2>

	<p>
        The Administrator of the Server can obtain the information about currently
        connected clients, and can switch off the Server.
	</p>

	<p>
	<img src="picture/ServerManager.png" alt="Administration of the Server.">
	</p>

	<p>
        After connecting to the Server the Administrator can see the list of 
        currently connected clients. The Administrator can:
	<ul>
		<li><b>Refresh the list</b>.
                Update the list of connected users.
		</li>
		<li><b>Kick a User</b>.
                Disconnect the selected client from the Server
		All operations in progress are cancelled. 
                Kick does not prevent the User from re-connect; His IP address
                will not be blocked as it may prevent connection from other
                computers that share the same connection point.
		<br/>
                Kick allows you to disconnect clients that use more connections
                than necessary thus blocking other Users with the "same" IP address.
		<br/>
                If you wish to deny the access to the User 
                (ban Him from using the database), you should disable
                His account in <a href="./user.html">User manager</a>.
		</li>
		<li><b>Shutdown the Server</b>.
                Stop the Server, disconnecting all clients immeditely.
		</li>
		<li><b>Hide the window</b>.
                Hide the window but keep the Server online (running).
                If you seek to administrate the Server again, you must
                connect to it as described in the Section 2.
		</li>
	</ul>
	</p>  
        
        
        <h2>4. Troubleshooting</h2>

	<p>
        Sometimes the Plantlore Server is unable to auto-detect the IP address
        of the computer where it runs, although the detection routine is
        quite inquisitive.
        It usually happens on computers
        with two different network interfaces or in Linux
        (mostly if /etc/hosts contains invalid information).
	</p>
        
        <p>
        JRE requires the "java.rmi.server.hostname" to be set properly, 
        otherwise the RMI mechanism will fail when someone will try to 
        contact the Server remotely. The typical message is:
        <pre>
        java.rmi.ConnectException: Connection refused to host: 127.0.0.1; 
        nested exception is:
           java.net.ConnectException: Connection refused: connect
        </pre>
        </p>
        
        <p>
        In order to make the Server work, you must specify the IP address
        yourself. You can do this when starting the Server:
        <pre>
        java -Djava.rmi.server.hostname=YourIP -jar plantlore-server.jar
        </pre>
        or (if you are not using the jar archive):
        <pre>
        java -Djava.rmi.server.hostname=YourIP net.sf.plantlore.server.Plantlore
        </pre>
        </p>
        
  </body>
</html>
